{% extends 'base.html' %}
{% block title %}Dashboard Retur{% endblock %}
{% block content %}
<h2 class="mb-4">♻️ Dashboard Retur Barang</h2>

<form method="get" class="mb-4">
  <div class="row g-2">
    <div class="col-auto">
      <select name="bulan" class="form-select" required>
        <option value="">-- Pilih Bulan --</option>
        {% for b in daftar_bulan %}
          <option value="{{ b }}" {% if bulan_terpilih == b %}selected{% endif %}>{{ b }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <select name="tahun" class="form-select" required>
        <option value="">-- Pilih Tahun --</option>
        {% for t in daftar_tahun %}
          <option value="{{ t }}" {% if tahun_terpilih == t %}selected{% endif %}>{{ t }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Tampilkan</button>
    </div>
  </div>
</form>



{% if bulan_terpilih and tahun_terpilih %}
  <div class="card mt-3">
    <div class="card-body">
      <h5>Total Retur: <b>Rp {{ total_retur|floatformat:0 }}</b></h5>
    </div>
  </div>

  

  <div class="table-responsive mt-3">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>No</th>
          <th>Kode Item</th>
          <th>Nama Item</th>
          <th>Jumlah</th>
          <th>Satuan</th>
          <th>Harga</th>
          <th>Pot. %</th>
          <th>Total Harga</th>
        </tr>
      </thead>
      <tbody>
        {% for r in data_retur %}
        <tr>
          <td>{{ r.No }}</td>
          <td>{{ r.Kode_Item }}</td>
          <td>{{ r.Nama_Item }}</td>
          <td>{{ r.Jml }}</td>
          <td>{{ r.Satuan }}</td>
          <td>Rp {{ r.Harga|floatformat:0 }}</td>
          <td>{{ r.Potongan }}</td>
          <td>Rp {{ r.Total_Harga|floatformat:0 }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="8" class="text-center">Tidak ada data retur.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  
{% endif %}
{% endblock %}
